(this["webpackJsonpduel-game"]=this["webpackJsonpduel-game"]||[]).push([[0],{12:function(e,t,s){},13:function(e,t,s){"use strict";s.r(t);var o=s(0),r=s.n(o),l=s(2),a=s.n(l);s(12);const i=2*Math.PI,n=(e,t,s,o,r)=>{e.beginPath(),e.arc(t,s,o,0,i),e.fillStyle=r,e.fill(),e.closePath()};var h=e=>{let{canvasWidth:t,canvasHeight:s,hero1Color:l,hero2Color:a,hero1Speed:i,hero2Speed:h,hero1ShootFreq:c,hero2ShootFreq:u}=e;const d=t/2,p=s/2;class y{constructor(e,t,s,o,r){this.x=e,this.y=t,this.dy=s,this.radius=o,this.color=r}move(e,t){this.y+=this.dy*e,this.y<this.radius?(this.bounce(),this.y=this.radius):this.y>t-this.radius&&(this.bounce(),this.y=t-this.radius)}draw(e){n(e,this.x,this.y,this.radius,this.color)}shoot(e,t){let s=this.x;s<d?s+=this.radius:s-=this.radius;let o=this.y+3*this.dy;return new S(s,o,t,e)}bounce(){this.dy=-this.dy}}class S{constructor(e,t,s,o){this.x=e,this.y=t,this.color=s,this.radius=o,this.dx=this.x<d?1:-1}move(){this.x+=this.dx}draw(e){n(e,this.x,this.y,this.radius,this.color)}}const g=Object(o.useRef)(null),[b]=Object(o.useState)(new class{constructor(){this.hero1=new y(50,100,1,20,l),this.hero2=new y(750,100,1,20,a),this.spells=[],this.score1=0,this.score2=0,this.spellColors=["orange","yellow"]}updateHero(e,t,o,r){e.move(t,s);const l=o-e.x,a=r-e.y;l*l+a*a<e.radius*e.radius&&(e.dy>0&&r>e.y||e.dy<0&&r<e.y)&&e.bounce()}updateSpells(e){const s=[];for(const o of this.spells)o.move(),o.x<0||o.x>t||(o.draw(e),this.isColliding(o.x,o.y,this.hero1)?this.score2++:this.isColliding(o.x,o.y,this.hero2)?this.score1++:s.push(o));this.spells=s}isColliding(e,t,s){return Math.abs(e-s.x)<s.radius&&Math.abs(t-s.y)<s.radius}shootSpell(e){const t=this.spellColors[e===this.hero1?0:1];this.spells.push(e.shoot(5,t))}setHeroSpellColor(e,t){this.spellColors[e===this.hero1?0:1]=t}}),[x,m]=Object(o.useState)(0),[v,f]=Object(o.useState)(0),[C,E]=Object(o.useState)(null),[w,j]=Object(o.useState)(!1),[O,q]=Object(o.useState)(0),[H,I]=Object(o.useState)(0),[k,F]=Object(o.useState)(0),M=Object(o.useCallback)(()=>{const e=g.current,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),b.updateHero(b.hero1,i,O,H),b.updateHero(b.hero2,h,O,H),b.hero1.draw(t),b.hero2.draw(t),b.updateSpells(t),t.font="20px Arial",t.fillStyle="black",t.fillText("Hero 1: "+b.score1,50,50),t.fillText("Hero 2: "+b.score2,650,50)},[b,i,h,O,H]);Object(o.useEffect)(()=>{const e=setInterval(()=>{b.shootSpell(b.hero1),console.log("spell")},2e3/c),t=setInterval(()=>{b.shootSpell(b.hero2)},2e3/u);return()=>{clearInterval(e),clearInterval(t)}},[c,u,b]),Object(o.useEffect)(()=>{const e=setInterval(M,1e3/60);return()=>{clearInterval(e)}},[M,b]);const R=(e,t)=>{m(e),f(t),j(!0)},P={position:"absolute",left:x+"px",top:v+"px",backgroundColor:"white",padding:"2px 5px",border:"1px solid #ddd",borderRadius:"8px"},T={padding:"8px 10px",borderRadius:"4px",textAlign:"center",color:"#333"},A=r.a.createElement("ol",{style:{margin:0,padding:0,listStyleType:"none"}},["blue","red","green","purple","orange"].map(e=>r.a.createElement("li",{key:e,onClick:()=>(e=>{0===C?b.setHeroSpellColor(b.hero1,e):b.setHeroSpellColor(b.hero2,e),j(!1)})(e),style:T},e)));return r.a.createElement("div",null,r.a.createElement("canvas",{ref:g,width:t,height:s,style:{border:"2px solid black"},onClick:e=>{const t=O,s=H;let o=s;s<p?o+=100:o-=100,b.isColliding(t,s,b.hero1)?(E(0),R(t+50,o)):b.isColliding(t,s,b.hero2)?(E(1),R(t-180,o)):w&&j(!1)},onMouseMove:e=>{const t=Date.now();if(t-k>=50){const s=e.target.getBoundingClientRect(),o=e.clientX-s.left,r=e.clientY-s.top;q(o),I(r),F(t)}}}),w&&r.a.createElement("div",{style:P},A))};var c=e=>{let{speed:t,setSpeed:s,frequency:o,setFrequency:l}=e;return r.a.createElement("div",{style:{margin:"10px"}},r.a.createElement("label",null,"Movement Speed:"),r.a.createElement("input",{type:"range",min:1,max:5,value:t,onChange:e=>s(parseInt(e.target.value))}),r.a.createElement("label",null,"Shooting Frequency:"),r.a.createElement("input",{type:"range",min:1,max:10,value:o,onChange:e=>l(parseInt(e.target.value))}))};const u=()=>{const[e,t]=r.a.useState(2),[s,o]=r.a.useState(2),[l,a]=r.a.useState(2),[i,n]=r.a.useState(2);return r.a.createElement(r.a.StrictMode,null,r.a.createElement(c,{speed:e,setSpeed:t,frequency:l,setFrequency:a}),r.a.createElement(c,{speed:s,setSpeed:o,frequency:i,setFrequency:n}),r.a.createElement(h,{canvasWidth:800,canvasHeight:600,hero1Color:"blue",hero2Color:"green",hero1Speed:e,hero2Speed:s,hero1ShootFreq:l,hero2ShootFreq:i}))};a.a.createRoot(document.getElementById("root")).render(r.a.createElement(u,null))},3:function(e,t,s){e.exports=s(13)}},[[3,1,2]]]);
//# sourceMappingURL=main.e28ecd7b.chunk.js.map